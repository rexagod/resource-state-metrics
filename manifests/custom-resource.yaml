# Copyright 2025 The Kubernetes resource-state-metrics Authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---
apiVersion: resource-state-metrics.instrumentation.k8s-sigs.io/v1alpha1
kind: ResourceMetricsMonitor
metadata:
  name: prefilled
  namespace: default
spec:
  configuration: |-
    stores:
      - group: "contoso.com"
        version: "v1alpha1"
        kind: "MyPlatform"
        resource: "myplatforms"
        families:
          - name: "test_metric"
            help: "helpless"
            metrics:
              - stubs:
                  - |
                    package foo
                    import (
                      "k8s.io/apimachinery/pkg/apis/meta/v1/unstructured"
                      "github.com/kubernetes-sigs/resource-state-metrics/pkg/utils"
                      klog "k8s.io/klog/v2"
                    )
                    func samples(o *unstructured.Unstructured) []utils.SampleType {
                      klog.InfoS("Generating samples for resource",
                        "name", o.GetName(),
                        "namespace", o.GetNamespace(),
                        "kind", o.GetKind(),
                        "apiVersion", o.GetAPIVersion(),
                        "uid", o.GetUID(),
                      )
                      return []utils.SampleType{
                        {
                          LabelKeys:  []string{"name"},
                          LabelValues: []string{o.GetName()},
                          Value: 1,
                        },
                      }
                    }
